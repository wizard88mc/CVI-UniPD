<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />

<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
Remove this if you use the .htaccess -->

<title>prova</title>
<meta name="description" content="" />
<meta name="author" content="Matteo" />

<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery-ui-1.8.20.custom.min.js"></script>
<link href="style/animate-custom.css" rel="stylesheet" />
<script src="js/Utilities.js"></script>


<script>

var Point = function(top, left) {
	this.top = top;
	this.left = left;
}

function calculateRotation(center, destinationPoint) {
	
	var catetoAdiacente = Math.abs(destinationPoint.left - center.left);
	var catetoOpposto = Math.abs(destinationPoint.top - center.top);
	var ipotenusa = Math.sqrt(Math.pow(catetoAdiacente, 2) + Math.pow(catetoOpposto, 2));
	
	var cosAlpha = catetoAdiacente / ipotenusa;
	var alpha = Math.acos(cosAlpha) * 180 / Math.PI ;
	
	console.log(alpha);
	
	/**
	 * Punto nel primo quadrante
	 */
	if (destinationPoint.top < center.top && 
		destinationPoint.left > center.left) {
		
		console.log("Primo quadrante");
		alpha = -alpha;
	}
	/**
	 * Secondo quadrante 
	 */
	else if (destinationPoint.top > center.top && 
		destinationPoint.left > center.left) {

		console.log("Secondo quadrante");
		alpha = alpha;
	}
	/**
	 * Terzo quadrante 
	 */
	else if (destinationPoint.top > center.top && 
		destinationPoint.left < center.left) {
	
		console.log("Terzo quadrante");
		alpha =  - alpha;
	}
	/**
	 * Quarto quadrante 
	 */
	else if (destinationPoint.top < center.top && 
		destinationPoint.left < center.left) {
	
		console.log("Quarto quadrante");
		alpha = alpha;
	}
	
	console.log(alpha);
	return alpha;
}

$(document).ready(function() {


	var center = new Point(201.8226299181107, 967.1939643505762 );
	var destinationPoint = new Point(681.4477264785471, 702.9207693110435 );
	
	var angle = calculateRotation(center, destinationPoint);
	console.log(angle);
	var transformString = 'rotate('+angle+'deg)';
	
	if (destinationPoint.left < center.left || 
		destinationPoint.left == center.left && destinationPoint.top < center.top) {
		transformString += ' scale(-1, 1)';
	}
	
	$('<img>').attr('id', 'prova').attr('src', 'images/nemo_training.png')
		.appendTo('body').css({
			width: '100px',
			height: '100px',
			position: 'absolute',
			left: center.left - 50,
			top: center.top - 50,
			'-webkit-transform': 'scale(-1, 1) rotate(-47.56deg)',
			'transform': 'scale(-1, 1) rotate(-47.56deg)'
		});
})

</script>

</head>

<body>
	
	

</body>
</html>
